<!DOCTYPE html><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><TITLE>Smug API</TITLE></HEAD><BODY><HEADER><H1>Smug API</H1></HEADER><ASIDE><HEADER><H2>Symbol index</H2></HEADER><NAV><UL><LI><A HREF="#section-1">SMUG</A><UL><LI><A HREF="#section-1-1"><CODE>=AND</CODE></A></LI><LI><A HREF="#section-1-2"><CODE>=EQL</CODE></A></LI><LI><A HREF="#section-1-3"><CODE>=FUNCALL</CODE></A></LI><LI><A HREF="#section-1-4"><CODE>=HANDLER-CASE</CODE></A></LI><LI><A HREF="#section-1-5"><CODE>=IF</CODE></A></LI><LI><A HREF="#section-1-6"><CODE>=LET*</CODE></A></LI><LI><A HREF="#section-1-7"><CODE>=LIST</CODE></A></LI><LI><A HREF="#section-1-8"><CODE>=NOT</CODE></A></LI><LI><A HREF="#section-1-9"><CODE>=OR</CODE></A></LI><LI><A HREF="#section-1-10"><CODE>=PROG1</CODE></A></LI><LI><A HREF="#section-1-11"><CODE>=PROG2</CODE></A></LI><LI><A HREF="#section-1-12"><CODE>=RESTART-CASE</CODE></A></LI><LI><A HREF="#section-1-13"><CODE>=SATISFIES</CODE></A></LI><LI><A HREF="#section-1-14"><CODE>=UNLESS</CODE></A></LI><LI><A HREF="#section-1-15"><CODE>=WHEN</CODE></A></LI><LI><A HREF="#section-1-16"><CODE>AT-LEAST</CODE></A></LI><LI><A HREF="#section-1-17"><CODE>BIND</CODE></A></LI><LI><A HREF="#section-1-18"><CODE>END-OF-INPUT</CODE></A></LI><LI><A HREF="#section-1-19"><CODE>EXACTLY</CODE></A></LI><LI><A HREF="#section-1-20"><CODE>FAIL</CODE></A></LI><LI><A HREF="#section-1-21"><CODE>GET-INPUT-POSITION</CODE></A></LI><LI><A HREF="#section-1-22"><CODE>ITEM</CODE></A></LI><LI><A HREF="#section-1-23"><CODE>MAYBE</CODE></A></LI><LI><A HREF="#section-1-24"><CODE>NONE-OF</CODE></A></LI><LI><A HREF="#section-1-25"><CODE>ONE-OF</CODE></A></LI><LI><A HREF="#section-1-26"><CODE>ONE-OR-MORE</CODE></A></LI><LI><A HREF="#section-1-27"><CODE>ONE-TO</CODE></A></LI><LI><A HREF="#section-1-28"><CODE>PLUS</CODE></A></LI><LI><A HREF="#section-1-29"><CODE>RANGE</CODE></A></LI><LI><A HREF="#section-1-30"><CODE>RESULT</CODE></A></LI><LI><A HREF="#section-1-31"><CODE>RUN</CODE></A></LI><LI><A HREF="#section-1-32"><CODE>ZERO-OR-MORE</CODE></A></LI><LI><A HREF="#section-1-33"><CODE>ZERO-TO</CODE></A></LI></UL></LI><LI><A HREF="#section-2">SMUG.CHARACTERS</A><UL><LI><A HREF="#section-2-1"><CODE>=CHARACTER</CODE></A></LI><LI><A HREF="#section-2-2"><CODE>=STRING</CODE></A></LI><LI><A HREF="#section-2-3"><CODE>LINE</CODE></A></LI><LI><A HREF="#section-2-4"><CODE>NEWLINE</CODE></A></LI><LI><A HREF="#section-2-5"><CODE>SKIP-WHITESPACE</CODE></A></LI><LI><A HREF="#section-2-6"><CODE>STRING-OF</CODE></A></LI><LI><A HREF="#section-2-7"><CODE>WHITESPACE</CODE></A></LI></UL></LI><LI><A HREF="#section-3">SMUG.NUMERALS</A><UL><LI><A HREF="#section-3-1"><CODE>DIGIT</CODE></A></LI><LI><A HREF="#section-3-2"><CODE>INTEGER-NUMBER</CODE></A></LI><LI><A HREF="#section-3-3"><CODE>NATURAL-NUMBER</CODE></A></LI></UL></LI></UL></NAV></ASIDE><ARTICLE><SECTION><HEADER><H2>SMUG</H2></HEADER><SECTION><HEADER><H3><CODE>=AND</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSERS</CODE> and which fails if any parser fails, otherwise it returns the result of the last parser.</P><FIGURE><PRE>(&amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=EQL</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>(ITEM)</CODE> to input and which returns the result of <CODE>(ITEM)</CODE> when it is <CODE>EQL</CODE> to <CODE>X</CODE>, otherwise it fails.</P><FIGURE><PRE>(X)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=FUNCALL</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>PARSER</CODE> to input and which returns <CODE>FUNCTION</CODE> called on <CODE>PARSER</CODE>'s successful result, otherwise it fails.</P><FIGURE><PRE>(PARSER FUNCTION)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=HANDLER-CASE</CODE></H3></HEADER><P><B>Macro</B>. Returns a parser which establishes <CODE>HANDLERS</CODE> as if by <CODE>HANDLER-CASE</CODE> and which applies <CODE>PARSER</CODE> to input.</P><FIGURE><PRE>(PARSER &amp;REST HANDLERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=IF</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>THEN-PARSER</CODE> to input if applying <CODE>TEST-PARSER</CODE> to input would succeed and which applies <CODE>ELSE-PARSER</CODE> otherwise.</P><FIGURE><PRE>(TEST-PARSER THEN-PARSER &amp;OPTIONAL ELSE-PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=LET*</CODE></H3></HEADER><P><B>Macro</B>. <CODE>LET*</CODE> for parsers. Returns a parser which <CODE>BIND</CODE>s parsers in <CODE>BINDINGS</CODE> and which then executes <CODE>BODY</CODE> with the results bound to vars in <CODE>BINDINGS</CODE>. If var is <I> then the result is ignored. The last expression in {BODY} has to return a parser which is finally applied to input.</I></P><FIGURE><PRE>(BINDINGS &amp;BODY BODY)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=LIST</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSERS</CODE> and which fails if any parser fails, otherwise it returns the results of <CODE>PARSERS</CODE> in a list.</P><FIGURE><PRE>(&amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=NOT</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>(ITEM)</CODE> to input unless <CODE>PARSER</CODE> would succeed, otherwise it fails.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=OR</CODE></H3></HEADER><P><B>Function</B>. Returns a parser that applies <CODE>PARSERS</CODE> to input until a parser is successful or fails.</P><FIGURE><PRE>(&amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=PROG1</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> and <CODE>PARSERS</CODE> as if by <CODE>=AND</CODE> but which returns the result of <CODE>PARSER</CODE>.</P><FIGURE><PRE>(PARSER &amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=PROG2</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER1</CODE>, <CODE>PARSER2</CODE> and <CODE>PARSERS</CODE> as if by <CODE>=AND</CODE> but which returns the result of <CODE>PARSER2</CODE>.</P><FIGURE><PRE>(PARSER1 PARSER2 &amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=RESTART-CASE</CODE></H3></HEADER><P><B>Macro</B>. Returns a parser which establishes <CODE>RESTARTS</CODE> as if by <CODE>RESTART-CASE</CODE> and which applies <CODE>PARSER</CODE> to input.</P><FIGURE><PRE>(PARSER &amp;REST RESTARTS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=SATISFIES</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>(ITEM)</CODE> to input and which returns the result of <CODE>(ITEM)</CODE> when it satisfies <CODE>PREDICATE</CODE>, otherwise it fails.</P><FIGURE><PRE>(PREDICATE)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=UNLESS</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSERS</CODE> as if by <CODE>=AND</CODE> unless applying <CODE>TEST-PARSER</CODE> to input would succeed, otherwise it fails.</P><FIGURE><PRE>(TEST-PARSER &amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=WHEN</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSERS</CODE> as if by <CODE>=AND</CODE> if applying <CODE>TEST-PARSER</CODE> to input would succeed, otherwise it fails.</P><FIGURE><PRE>(TEST-PARSER &amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>AT-LEAST</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully at least <CODE>N</CODE> but no more than <CODE>LIMIT</CODE> times and which returns its results in a list, otherwise it fails.</P><FIGURE><PRE>(N PARSER &amp;KEY LIMIT)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>BIND</CODE></H3></HEADER><P><B>Function</B>. Returns a parser that first applies <CODE>PARSER</CODE> to the input, returning a list of <CODE>(VALUE . INPUT)</CODE> pairs. <CODE>MAKE-PARSER</CODE> is then applied to each <CODE>VALUE</CODE>, and the resulting parser is then applied to each <CODE>INPUT</CODE>. The returned lists of pairs are then concatenated and returned.</P><FIGURE><PRE>(PARSER MAKE-PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>END-OF-INPUT</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which succeeds when input is empty and fails otherwise.</P><FIGURE><PRE>()</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>EXACTLY</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully exactly <CODE>N</CODE> times and which returns its results in a list, otherwise it fails.</P><FIGURE><PRE>(N PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>FAIL</CODE></H3></HEADER><P><B>Macro</B>. Returns a parser which fails and optionally executes <CODE>HANDLING</CODE>. <CODE>GET-INPUT-POSITION</CODE> may be called inside <CODE>HANDLING</CODE>.</P><FIGURE><PRE>(&amp;REST HANDLING)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>GET-INPUT-POSITION</CODE></H3></HEADER><P><B>Function</B>. Returns current position, line position and character position.</P><FIGURE><PRE>()</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ITEM</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which consumes and returns the next item from input or fails if input is empty.</P><FIGURE><PRE>()</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>MAYBE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>PARSER</CODE> to input and which will always succeed.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>NONE-OF</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>(ITEM)</CODE> to input and which returns the result of <CODE>(ITEM)</CODE> when it is not <CODE>EQL</CODE> to any item in <CODE>LIST</CODE>, otherwise it fails.</P><FIGURE><PRE>(LIST)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ONE-OF</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>(ITEM)</CODE> to input and which returns the result of <CODE>(ITEM)</CODE> when it is <CODE>EQL</CODE> to an item in <CODE>LIST</CODE>, otherwise it fails.</P><FIGURE><PRE>(LIST)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ONE-OR-MORE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully one or more times and which returns its results in a list, otherwise it fails.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ONE-TO</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully one to <CODE>N</CODE> times and which returns its results in a list, otherwise it fails.</P><FIGURE><PRE>(N PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>PLUS</CODE></H3></HEADER><P><B>Function</B>. The non-deterministic choice combinator. Returns a parser that applies <CODE>PARSERS</CODE> to input and returns a list of their results.</P><FIGURE><PRE>(&amp;REST PARSERS)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>RANGE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which applies <CODE>PARSER</CODE> to input and which returns the result of <CODE>PARSER</CODE> when it matches the range defined by <CODE>FROM</CODE>, <CODE>TO</CODE> and <CODE>PREDICATE</CODE>, otherwise it fails.</P><FIGURE><PRE>(FROM TO &amp;KEY PARSER PREDICATE)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>RESULT</CODE></H3></HEADER><P><B>Function</B>. Returns a parser that always returns <CODE>VALUE</CODE> without consuming input.</P><FIGURE><PRE>(VALUE)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>RUN</CODE></H3></HEADER><P><B>Function</B>. Runs a <CODE>PARSER</CODE> against <CODE>INPUT-SOURCE</CODE>, which can be an <CODE>array</CODE>, a <CODE>stream</CODE> or a <CODE>list</CODE>. <CODE>RESULT</CODE> is then called on the resulting list of <CODE>(result . input)</CODE> pairs.</P><FIGURE><PRE>(PARSER INPUT-SOURCE &amp;KEY RESULT)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ZERO-OR-MORE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully zero or more times and which returns its results in a list.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>ZERO-TO</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>PARSER</CODE> successfully one to <CODE>N</CODE> times and which returns its results in a list.</P><FIGURE><PRE>(N PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION></SECTION><SECTION><HEADER><H2>SMUG.CHARACTERS</H2></HEADER><SECTION><HEADER><H3><CODE>=CHARACTER</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses character <CODE>X</CODE> with respect to <CODE>CASE-SENSITIVE-P</CODE>, otherwise it fails.</P><FIGURE><PRE>(X &amp;OPTIONAL CASE-SENSITIVE-P)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>=STRING</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses <CODE>STRING</CODE> with respect to <CODE>CASE-SENSITIVE-P</CODE>, otherwise it fails.</P><FIGURE><PRE>(STRING &amp;OPTIONAL CASE-SENSITIVE-P)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>LINE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses zero or more characters terminated by a newline character or end of input and which returns them in a string, otherwise it fails. If <CODE>KEEP-NEWLINE</CODE> is not <CODE>NIL</CODE> the eventual newline character is kept in the string.</P><FIGURE><PRE>(&amp;OPTIONAL KEEP-NEWLINE)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>NEWLINE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses <CODE>#\Newline</CODE>, otherwise it fails.</P><FIGURE><PRE>()</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>SKIP-WHITESPACE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which <CODE>BIND</CODE>s <CODE>(WHITESPACE)</CODE> zero or more times and <CODE>PARSER</CODE>, otherwise it fails.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>STRING-OF</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which successfully <CODE>BIND</CODE>s <CODE>PARSER</CODE> one or more times and which returns its results in a string, otherwise it fails.</P><FIGURE><PRE>(PARSER)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>WHITESPACE</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses <CODE>#\Tab</CODE>, <CODE>#\Newline</CODE>, <CODE>#\Vt</CODE>, <CODE>#\Ff</CODE>, <CODE>#\Return</CODE> or <CODE>#\Space</CODE>.</P><FIGURE><PRE>()</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION></SECTION><SECTION><HEADER><H2>SMUG.NUMERALS</H2></HEADER><SECTION><HEADER><H3><CODE>DIGIT</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses a digit with <CODE>RADIX</CODE>.</P><FIGURE><PRE>(&amp;OPTIONAL RADIX)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>INTEGER-NUMBER</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses an integer with <CODE>RADIX</CODE>.</P><FIGURE><PRE>(&amp;OPTIONAL RADIX)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION><SECTION><HEADER><H3><CODE>NATURAL-NUMBER</CODE></H3></HEADER><P><B>Function</B>. Returns a parser which parses a natural number with <CODE>RADIX</CODE>.</P><FIGURE><PRE>(&amp;OPTIONAL RADIX)</PRE><FIGCAPTION>Lambda list</FIGCAPTION></FIGURE></SECTION></SECTION></ARTICLE></BODY></HTML>